(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = require("../shared/constants");
var Grid_1 = require("./Grid");
var View_1 = require("./View");
var Snake_1 = require("./Snake");
var Game = /** @class */ (function () {
    function Game() {
        this.frame = 0;
        this.score = 0;
        this.speed = constants_1.MIN_SPEED;
        this.direction = constants_1.DIRECTION.RIGHT;
        this.isPaused = false;
        this.grid = new Grid_1.default();
        this.view = new View_1.default(this.grid.columnsQuantity, this.grid.rowsQuantity);
        this.snake = new Snake_1.default(this.grid);
        window.addEventListener('keydown', this.onKeyDown.bind(this));
        this.generateApple();
    }
    Game.prototype.start = function () {
        this.view.hideStartScreen();
        window.focus();
        window.requestAnimationFrame(this.startLoop.bind(this));
    };
    Game.prototype.pause = function () {
        this.isPaused = true;
        this.view.togglePauseScreen();
    };
    Game.prototype.resume = function () {
        this.isPaused = false;
        this.view.togglePauseScreen();
        window.requestAnimationFrame(this.startLoop.bind(this));
    };
    Game.prototype.onKeyDown = function (event) {
        switch (event.key) {
            case constants_1.KEY.ARROW_RIGHT:
                this.tempDirection = constants_1.DIRECTION.RIGHT;
                break;
            case constants_1.KEY.ARROW_LEFT:
                this.tempDirection = constants_1.DIRECTION.LEFT;
                break;
            case constants_1.KEY.ARROW_UP:
                this.tempDirection = constants_1.DIRECTION.UP;
                break;
            case constants_1.KEY.ARROW_DOWN:
                this.tempDirection = constants_1.DIRECTION.DOWN;
                break;
            case constants_1.KEY.ENTER:
                if (!this.frame) {
                    this.start();
                }
                break;
            case constants_1.KEY.SPACE:
                if (this.frame) {
                    this.isPaused ? this.resume() : this.pause();
                }
                break;
        }
    };
    Game.prototype.generateApple = function () {
        var emptyCoordinates = this.getEmptyCoordinates();
        var foodCoordinate = emptyCoordinates[Math.floor(Math.random() * (emptyCoordinates.length - 1))];
        this.grid.setCell(foodCoordinate, constants_1.CELL_TYPE.APPLE);
    };
    Game.prototype.getEmptyCoordinates = function () {
        var emptyCoordinates = [];
        for (var row = 0; row < this.grid.rowsQuantity; row++) {
            for (var column = 0; column < this.grid.columnsQuantity; column++) {
                if (this.grid.getCell({ row: row, column: column }) === constants_1.CELL_TYPE.EMPTY) {
                    emptyCoordinates.push({ row: row, column: column });
                }
            }
        }
        return emptyCoordinates;
    };
    Game.prototype.startLoop = function () {
        if (this.isPaused) {
            return;
        }
        if (++this.frame % (constants_1.MAX_SPEED - this.speed || constants_1.MIN_SPEED) !== 0) {
            window.requestAnimationFrame(this.startLoop.bind(this));
            return;
        }
        var headRow = this.snake.head.row;
        var headColumn = this.snake.head.column;
        switch (this.getNextDirection()) {
            case constants_1.DIRECTION.RIGHT:
                headColumn++;
                break;
            case constants_1.DIRECTION.LEFT:
                headColumn--;
                break;
            case constants_1.DIRECTION.UP:
                headRow--;
                break;
            case constants_1.DIRECTION.DOWN:
                headRow++;
                break;
        }
        if (this.checkGameOver({ row: headRow, column: headColumn })) {
            // todo handle game over
            return;
        }
        var isGetApple = this.grid.getCell({ row: headRow, column: headColumn }) === constants_1.CELL_TYPE.APPLE;
        if (isGetApple) {
            this.snake.eat({ row: headRow, column: headColumn });
            this.generateApple();
            this.updateScore(++this.score);
        }
        this.snake.move({ row: headRow, column: headColumn });
        this.view.draw(this.grid.grid);
        window.requestAnimationFrame(this.startLoop.bind(this));
    };
    Game.prototype.getNextDirection = function () {
        switch (this.tempDirection) {
            case constants_1.DIRECTION.RIGHT:
                if (this.direction !== constants_1.DIRECTION.LEFT) {
                    this.direction = constants_1.DIRECTION.RIGHT;
                }
                break;
            case constants_1.DIRECTION.LEFT:
                if (this.direction !== constants_1.DIRECTION.RIGHT) {
                    this.direction = constants_1.DIRECTION.LEFT;
                }
                break;
            case constants_1.DIRECTION.UP:
                if (this.direction !== constants_1.DIRECTION.DOWN) {
                    this.direction = constants_1.DIRECTION.UP;
                }
                break;
            case constants_1.DIRECTION.DOWN:
                if (this.direction !== constants_1.DIRECTION.UP) {
                    this.direction = constants_1.DIRECTION.DOWN;
                }
                break;
        }
        return this.direction;
    };
    Game.prototype.updateScore = function (score) {
        if (this.score % constants_1.SPEED_INCREASE_INTERVAL === 0) {
            this.view.updateSpeed(++this.speed);
        }
        this.view.updateScore(this.score);
    };
    Game.prototype.checkGameOver = function (snakeHead) {
        var isTouchedBorder = snakeHead.row < 0 || snakeHead.column < 0 || snakeHead.row > this.grid.rowsQuantity - 1 || snakeHead.column > this.grid.columnsQuantity - 1;
        var isTouchedHerself = this.grid.getCell(snakeHead) === constants_1.CELL_TYPE.SNAKE;
        return isTouchedBorder || isTouchedHerself;
    };
    return Game;
}());
exports.default = Game;

},{"../shared/constants":6,"./Grid":2,"./Snake":3,"./View":4}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = require("../shared/constants");
var Grid = /** @class */ (function () {
    function Grid() {
        this._grid = [];
        this._cols = Math.round(window.innerWidth / constants_1.CELL_SIZE) - constants_1.GRID_MARGIN;
        this._rows = Math.round(window.innerHeight / constants_1.CELL_SIZE) - constants_1.GRID_MARGIN;
        for (var row = 0; row < this._rows; row++) {
            this._grid[row] = [];
            for (var column = 0; column < this._cols; column++) {
                this._grid[row][column] = constants_1.CELL_TYPE.EMPTY;
            }
        }
    }
    Object.defineProperty(Grid.prototype, "columnsQuantity", {
        get: function () {
            return this._cols;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Grid.prototype, "rowsQuantity", {
        get: function () {
            return this._rows;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Grid.prototype, "grid", {
        get: function () {
            return this._grid;
        },
        enumerable: true,
        configurable: true
    });
    Grid.prototype.getCell = function (coordinate) {
        return this._grid[coordinate.row][coordinate.column];
    };
    Grid.prototype.setCell = function (coordinate, type) {
        this._grid[coordinate.row][coordinate.column] = type;
    };
    return Grid;
}());
exports.default = Grid;

},{"../shared/constants":6}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = require("../shared/constants");
var Snake = /** @class */ (function () {
    function Snake(grid) {
        this.grid = grid;
        this.chain = [];
        this.chain.push(constants_1.START_SNAKE_COORDINATE);
    }
    Object.defineProperty(Snake.prototype, "head", {
        get: function () {
            return this.chain[0];
        },
        enumerable: true,
        configurable: true
    });
    Snake.prototype.eat = function (coordinate) {
        this.chain.unshift(coordinate);
        this.grid.setCell(coordinate, constants_1.CELL_TYPE.SNAKE);
    };
    Snake.prototype.move = function (coordinate) {
        this.chain.unshift(coordinate);
        this.grid.setCell(coordinate, constants_1.CELL_TYPE.SNAKE);
        var nextCoordinate = {
            row: this.chain[this.chain.length - 1].row,
            column: this.chain[this.chain.length - 1].column
        };
        this.grid.setCell(nextCoordinate, constants_1.CELL_TYPE.EMPTY);
        this.chain.pop();
    };
    return Snake;
}());
exports.default = Snake;

},{"../shared/constants":6}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = require("../shared/constants");
var View = /** @class */ (function () {
    function View(cols, rows) {
        this.cols = cols;
        this.rows = rows;
        this.startScreen = document.getElementsByClassName('popup--start')[0];
        this.pauseScreen = document.getElementsByClassName('popup--pause')[0];
        this.scoreContainer = document.getElementsByClassName('score')[0];
        this.speedContainer = document.getElementsByClassName('speed')[0];
        this.canvas = document.getElementsByClassName('battlefield')[0];
        this.canvas.setAttribute('width', this.cols * constants_1.CELL_SIZE + "px");
        this.canvas.setAttribute('height', this.rows * constants_1.CELL_SIZE + "px");
        this.ctx = this.canvas.getContext('2d');
    }
    View.prototype.draw = function (grid) {
        var _this = this;
        grid.forEach(function (rowArr, row) {
            rowArr.forEach(function (type, column) {
                _this.drawCell({ row: row, column: column }, type);
            });
        });
    };
    View.prototype.updateScore = function (score) {
        this.scoreContainer.textContent = score.toString();
    };
    View.prototype.updateSpeed = function (speed) {
        this.speedContainer.textContent = speed.toString();
    };
    View.prototype.hideStartScreen = function () {
        this.startScreen.style.display = 'none';
    };
    View.prototype.togglePauseScreen = function () {
        this.pauseScreen.style.display = this.pauseScreen.style.display === 'flex' ? 'none' : 'flex';
    };
    View.prototype.drawCell = function (coordinate, type) {
        this.ctx.fillStyle = constants_1.COLOR[type] || constants_1.COLOR[constants_1.CELL_TYPE.EMPTY];
        this.ctx.fillRect(coordinate.column * constants_1.CELL_SIZE, coordinate.row * constants_1.CELL_SIZE, constants_1.CELL_SIZE, constants_1.CELL_SIZE);
    };
    ;
    return View;
}());
exports.default = View;

},{"../shared/constants":6}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Game_1 = require("./controllers/Game");
var game = new Game_1.default();
var startButton = document.getElementsByClassName('popup__button')[0];
startButton.addEventListener('click', function () { return game.start(); });

},{"./controllers/Game":1}],6:[function(require,module,exports){
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.CELL_SIZE = 20;
exports.GRID_MARGIN = 6;
exports.MIN_SPEED = 1;
exports.MAX_SPEED = 8;
exports.SPEED_INCREASE_INTERVAL = 5;
exports.START_SNAKE_COORDINATE = {
    row: 3,
    column: 3
};
var KEY;
(function (KEY) {
    KEY["ARROW_UP"] = "ArrowUp";
    KEY["ARROW_RIGHT"] = "ArrowRight";
    KEY["ARROW_DOWN"] = "ArrowDown";
    KEY["ARROW_LEFT"] = "ArrowLeft";
    KEY["ENTER"] = "Enter";
    KEY["SPACE"] = " ";
})(KEY = exports.KEY || (exports.KEY = {}));
var CELL_TYPE;
(function (CELL_TYPE) {
    CELL_TYPE[CELL_TYPE["EMPTY"] = 0] = "EMPTY";
    CELL_TYPE[CELL_TYPE["SNAKE"] = 1] = "SNAKE";
    CELL_TYPE[CELL_TYPE["APPLE"] = 2] = "APPLE";
    CELL_TYPE[CELL_TYPE["CRASH"] = 3] = "CRASH";
})(CELL_TYPE = exports.CELL_TYPE || (exports.CELL_TYPE = {}));
var DIRECTION;
(function (DIRECTION) {
    DIRECTION[DIRECTION["RIGHT"] = 0] = "RIGHT";
    DIRECTION[DIRECTION["LEFT"] = 1] = "LEFT";
    DIRECTION[DIRECTION["DOWN"] = 2] = "DOWN";
    DIRECTION[DIRECTION["UP"] = 3] = "UP";
})(DIRECTION = exports.DIRECTION || (exports.DIRECTION = {}));
exports.COLOR = (_a = {},
    _a[CELL_TYPE.SNAKE] = '#0057e7',
    _a[CELL_TYPE.APPLE] = '#d62d20',
    _a[CELL_TYPE.CRASH] = '#ffa700',
    _a[CELL_TYPE.EMPTY] = '#ffffff',
    _a);

},{}]},{},[5])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29udHJvbGxlcnMvR2FtZS50cyIsInNyYy9jb250cm9sbGVycy9HcmlkLnRzIiwic3JjL2NvbnRyb2xsZXJzL1NuYWtlLnRzIiwic3JjL2NvbnRyb2xsZXJzL1ZpZXcudHMiLCJzcmMvbWFpbi50cyIsInNyYy9zaGFyZWQvY29uc3RhbnRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxpREFBK0c7QUFDL0csK0JBQTBCO0FBQzFCLCtCQUEwQjtBQUMxQixpQ0FBNEI7QUFHNUI7SUFXSTtRQVBRLFVBQUssR0FBVyxDQUFDLENBQUM7UUFDbEIsVUFBSyxHQUFXLENBQUMsQ0FBQztRQUNsQixVQUFLLEdBQVcscUJBQVMsQ0FBQztRQUMxQixjQUFTLEdBQWMscUJBQVMsQ0FBQyxLQUFLLENBQUM7UUFFdkMsYUFBUSxHQUFZLEtBQUssQ0FBQztRQUc5QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksY0FBSSxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLGNBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3hFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxlQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWxDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUU5RCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVELG9CQUFLLEdBQUw7UUFDSSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQzVCLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNmLE1BQU0sQ0FBQyxxQkFBcUIs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TCx5Q0FBSSxDQUFBO0lBQ0oseUNBQUksQ0FBQTtJQUNKLHFDQUFFLENBQUE7QUFDTixDQUFDLEVBTFcsU0FBUyxHQUFULGlCQUFTLEtBQVQsaUJBQVMsUUFLcEI7QUFFWSxRQUFBLEtBQUs7SUFDZCxHQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUcsU0FBUztJQUM1QixHQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUcsU0FBUztJQUM1QixHQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUcsU0FBUztJQUM1QixHQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUcsU0FBUztRQUM5QiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCB7IENFTExfVFlQRSwgRElSRUNUSU9OLCBLRVksIE1BWF9TUEVFRCwgTUlOX1NQRUVELCBTUEVFRF9JTkNSRUFTRV9JTlRFUlZBTCB9IGZyb20gXCIuLi9zaGFyZWQvY29uc3RhbnRzXCI7XG5pbXBvcnQgR3JpZCBmcm9tIFwiLi9HcmlkXCI7XG5pbXBvcnQgVmlldyBmcm9tIFwiLi9WaWV3XCI7XG5pbXBvcnQgU25ha2UgZnJvbSBcIi4vU25ha2VcIjtcbmltcG9ydCBJQ29vcmRpbmF0ZSBmcm9tIFwiLi4vc2hhcmVkL0lDb29yZGluYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdmlldzogVmlldztcbiAgICBwcml2YXRlIHJlYWRvbmx5IGdyaWQ6IEdyaWQ7XG4gICAgcHJpdmF0ZSByZWFkb25seSBzbmFrZTogU25ha2U7XG4gICAgcHJpdmF0ZSBmcmFtZTogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIHNjb3JlOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgc3BlZWQ6IG51bWJlciA9IE1JTl9TUEVFRDtcbiAgICBwcml2YXRlIGRpcmVjdGlvbjogRElSRUNUSU9OID0gRElSRUNUSU9OLlJJR0hUO1xuICAgIHByaXZhdGUgdGVtcERpcmVjdGlvbjogRElSRUNUSU9OO1xuICAgIHByaXZhdGUgaXNQYXVzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmdyaWQgPSBuZXcgR3JpZCgpO1xuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgVmlldyh0aGlzLmdyaWQuY29sdW1uc1F1YW50aXR5LCB0aGlzLmdyaWQucm93c1F1YW50aXR5KTtcbiAgICAgICAgdGhpcy5zbmFrZSA9IG5ldyBTbmFrZSh0aGlzLmdyaWQpO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24uYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5nZW5lcmF0ZUFwcGxlKCk7XG4gICAgfVxuXG4gICAgc3RhcnQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMudmlldy5oaWRlU3RhcnRTY3JlZW4oKTtcbiAgICAgICAgd2luZG93LmZvY3VzKCk7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zdGFydExvb3AuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXNQYXVzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnZpZXcudG9nZ2xlUGF1c2VTY3JlZW4oKTtcbiAgICB9XG5cbiAgICByZXN1bWUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52aWV3LnRvZ2dsZVBhdXNlU2NyZWVuKCk7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zdGFydExvb3AuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbktleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgICAgIGNhc2UgS0VZLkFSUk9XX1JJR0hUOlxuICAgICAgICAgICAgICAgIHRoaXMudGVtcERpcmVjdGlvbiA9IERJUkVDVElPTi5SSUdIVDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS0VZLkFSUk9XX0xFRlQ6XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wRGlyZWN0aW9uID0gRElSRUNUSU9OLkxFRlQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtFWS5BUlJPV19VUDpcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBEaXJlY3Rpb24gPSBESVJFQ1RJT04uVVA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtFWS5BUlJPV19ET1dOOlxuICAgICAgICAgICAgICAgIHRoaXMudGVtcERpcmVjdGlvbiA9IERJUkVDVElPTi5ET1dOO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLRVkuRU5URVI6XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtFWS5TUEFDRTpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUGF1c2VkID8gdGhpcy5yZXN1bWUoKSA6IHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlQXBwbGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVtcHR5Q29vcmRpbmF0ZXM6IElDb29yZGluYXRlW10gPSB0aGlzLmdldEVtcHR5Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgY29uc3QgZm9vZENvb3JkaW5hdGU6IElDb29yZGluYXRlID0gZW1wdHlDb29yZGluYXRlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoZW1wdHlDb29yZGluYXRlcy5sZW5ndGggLSAxKSldO1xuXG4gICAgICAgIHRoaXMuZ3JpZC5zZXRDZWxsKGZvb2RDb29yZGluYXRlLCBDRUxMX1RZUEUuQVBQTEUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RW1wdHlDb29yZGluYXRlcygpOiBJQ29vcmRpbmF0ZVtdIHtcbiAgICAgICAgY29uc3QgZW1wdHlDb29yZGluYXRlczogSUNvb3JkaW5hdGVbXSA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IHJvdzogbnVtYmVyID0gMDsgcm93IDwgdGhpcy5ncmlkLnJvd3NRdWFudGl0eTsgcm93KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbjogbnVtYmVyID0gMDsgY29sdW1uIDwgdGhpcy5ncmlkLmNvbHVtbnNRdWFudGl0eTsgY29sdW1uKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ncmlkLmdldENlbGwoeyByb3csIGNvbHVtbiB9KSA9PT0gQ0VMTF9UWVBFLkVNUFRZKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtcHR5Q29vcmRpbmF0ZXMucHVzaCh7IHJvdywgY29sdW1uIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbXB0eUNvb3JkaW5hdGVzO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhcnRMb29wKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc1BhdXNlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCsrdGhpcy5mcmFtZSAlIChNQVhfU1BFRUQgLSB0aGlzLnNwZWVkIHx8IE1JTl9TUEVFRCkgIT09IDApIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zdGFydExvb3AuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZFJvdzogbnVtYmVyID0gdGhpcy5zbmFrZS5oZWFkLnJvdztcbiAgICAgICAgbGV0IGhlYWRDb2x1bW46IG51bWJlciA9IHRoaXMuc25ha2UuaGVhZC5jb2x1bW47XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLmdldE5leHREaXJlY3Rpb24oKSkge1xuICAgICAgICAgICAgY2FzZSBESVJFQ1RJT04uUklHSFQ6XG4gICAgICAgICAgICAgICAgaGVhZENvbHVtbisrO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBESVJFQ1RJT04uTEVGVDpcbiAgICAgICAgICAgICAgICBoZWFkQ29sdW1uLS07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIERJUkVDVElPTi5VUDpcbiAgICAgICAgICAgICAgICBoZWFkUm93LS07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIERJUkVDVElPTi5ET1dOOlxuICAgICAgICAgICAgICAgIGhlYWRSb3crKztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrR2FtZU92ZXIoeyByb3c6IGhlYWRSb3csIGNvbHVtbjogaGVhZENvbHVtbiB9KSkge1xuICAgICAgICAgICAgLy8gdG9kbyBoYW5kbGUgZ2FtZSBvdmVyXG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlzR2V0QXBwbGU6IGJvb2xlYW4gPSB0aGlzLmdyaWQuZ2V0Q2VsbCh7IHJvdzogaGVhZFJvdywgY29sdW1uOiBoZWFkQ29sdW1uIH0pID09PSBDRUxMX1RZUEUuQVBQTEU7XG5cbiAgICAgICAgaWYgKGlzR2V0QXBwbGUpIHtcbiAgICAgICAgICAgIHRoaXMuc25ha2UuZWF0KHsgcm93OiBoZWFkUm93LCBjb2x1bW46IGhlYWRDb2x1bW4gfSk7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlQXBwbGUoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2NvcmUoKyt0aGlzLnNjb3JlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc25ha2UubW92ZSh7IHJvdzogaGVhZFJvdywgY29sdW1uOiBoZWFkQ29sdW1uIH0pO1xuICAgICAgICB0aGlzLnZpZXcuZHJhdyh0aGlzLmdyaWQuZ3JpZCk7XG5cbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnN0YXJ0TG9vcC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE5leHREaXJlY3Rpb24oKTogRElSRUNUSU9OIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnRlbXBEaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgRElSRUNUSU9OLlJJR0hUOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiAhPT0gRElSRUNUSU9OLkxFRlQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBESVJFQ1RJT04uUklHSFQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBESVJFQ1RJT04uTEVGVDpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT09IERJUkVDVElPTi5SSUdIVCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERJUkVDVElPTi5MRUZUO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRElSRUNUSU9OLlVQOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiAhPT0gRElSRUNUSU9OLkRPV04pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBESVJFQ1RJT04uVVA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBESVJFQ1RJT04uRE9XTjpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT09IERJUkVDVElPTi5VUCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERJUkVDVElPTi5ET1dOO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVNjb3JlKHNjb3JlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuc2NvcmUgJSBTUEVFRF9JTkNSRUFTRV9JTlRFUlZBTCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy52aWV3LnVwZGF0ZVNwZWVkKCsrdGhpcy5zcGVlZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnZpZXcudXBkYXRlU2NvcmUodGhpcy5zY29yZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGVja0dhbWVPdmVyKHNuYWtlSGVhZDogSUNvb3JkaW5hdGUpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgaXNUb3VjaGVkQm9yZGVyOiBib29sZWFuID0gc25ha2VIZWFkLnJvdyA8IDAgfHwgc25ha2VIZWFkLmNvbHVtbiA8IDAgfHwgc25ha2VIZWFkLnJvdyA+IHRoaXMuZ3JpZC5yb3dzUXVhbnRpdHkgLSAxIHx8IHNuYWtlSGVhZC5jb2x1bW4gPiB0aGlzLmdyaWQuY29sdW1uc1F1YW50aXR5IC0gMTtcbiAgICAgICAgY29uc3QgaXNUb3VjaGVkSGVyc2VsZjogYm9vbGVhbiA9IHRoaXMuZ3JpZC5nZXRDZWxsKHNuYWtlSGVhZCkgPT09IENFTExfVFlQRS5TTkFLRTtcblxuICAgICAgICByZXR1cm4gaXNUb3VjaGVkQm9yZGVyIHx8IGlzVG91Y2hlZEhlcnNlbGY7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ0VMTF9TSVpFLCBDRUxMX1RZUEUsIEdSSURfTUFSR0lOIH0gZnJvbSBcIi4uL3NoYXJlZC9jb25zdGFudHNcIjtcbmltcG9ydCBJQ29vcmRpbmF0ZSBmcm9tIFwiLi4vc2hhcmVkL0lDb29yZGluYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdyaWQge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2dyaWQ6IENFTExfVFlQRVtdW10gPSBbXTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb2xzOiBudW1iZXI7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfcm93czogbnVtYmVyO1xuXG4gICAgZ2V0IGNvbHVtbnNRdWFudGl0eSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29scztcbiAgICB9XG5cbiAgICBnZXQgcm93c1F1YW50aXR5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yb3dzO1xuICAgIH1cblxuICAgIGdldCBncmlkKCk6IENFTExfVFlQRVtdW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ3JpZDtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fY29scyA9IE1hdGgucm91bmQod2luZG93LmlubmVyV2lkdGggLyBDRUxMX1NJWkUpIC0gR1JJRF9NQVJHSU47XG4gICAgICAgIHRoaXMuX3Jvd3MgPSBNYXRoLnJvdW5kKHdpbmRvdy5pbm5lckhlaWdodCAvIENFTExfU0laRSkgLSBHUklEX01BUkdJTjtcblxuICAgICAgICBmb3IgKGxldCByb3c6IG51bWJlciA9IDA7IHJvdyA8IHRoaXMuX3Jvd3M7IHJvdysrKSB7XG4gICAgICAgICAgICB0aGlzLl9ncmlkW3Jvd10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uOiBudW1iZXIgPSAwOyBjb2x1bW4gPCB0aGlzLl9jb2xzOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2dyaWRbcm93XVtjb2x1bW5dID0gQ0VMTF9UWVBFLkVNUFRZO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q2VsbChjb29yZGluYXRlOiBJQ29vcmRpbmF0ZSk6IENFTExfVFlQRSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ncmlkW2Nvb3JkaW5hdGUucm93XVtjb29yZGluYXRlLmNvbHVtbl07XG4gICAgfVxuXG4gICAgc2V0Q2VsbChjb29yZGluYXRlOiBJQ29vcmRpbmF0ZSwgdHlwZTogQ0VMTF9UWVBFKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2dyaWRbY29vcmRpbmF0ZS5yb3ddW2Nvb3JkaW5hdGUuY29sdW1uXSA9IHR5cGU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ0VMTF9UWVBFLCBTVEFSVF9TTkFLRV9DT09SRElOQVRFIH0gZnJvbSBcIi4uL3NoYXJlZC9jb25zdGFudHNcIjtcbmltcG9ydCBHcmlkIGZyb20gXCIuL0dyaWRcIjtcbmltcG9ydCBJQ29vcmRpbmF0ZSBmcm9tIFwiLi4vc2hhcmVkL0lDb29yZGluYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNuYWtlIHtcbiAgICBwcml2YXRlIGNoYWluOiBJQ29vcmRpbmF0ZVtdID0gW107XG5cbiAgICBnZXQgaGVhZCgpOiBJQ29vcmRpbmF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYWluWzBdO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZ3JpZDogR3JpZCkge1xuICAgICAgICB0aGlzLmNoYWluLnB1c2goU1RBUlRfU05BS0VfQ09PUkRJTkFURSk7XG4gICAgfVxuXG4gICAgZWF0KGNvb3JkaW5hdGU6IElDb29yZGluYXRlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2hhaW4udW5zaGlmdChjb29yZGluYXRlKTtcbiAgICAgICAgdGhpcy5ncmlkLnNldENlbGwoY29vcmRpbmF0ZSwgQ0VMTF9UWVBFLlNOQUtFKTtcbiAgICB9XG5cbiAgICBtb3ZlKGNvb3JkaW5hdGU6IElDb29yZGluYXRlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2hhaW4udW5zaGlmdChjb29yZGluYXRlKTtcbiAgICAgICAgdGhpcy5ncmlkLnNldENlbGwoY29vcmRpbmF0ZSwgQ0VMTF9UWVBFLlNOQUtFKTtcblxuICAgICAgICBjb25zdCBuZXh0Q29vcmRpbmF0ZTogSUNvb3JkaW5hdGUgPSB7XG4gICAgICAgICAgICByb3c6IHRoaXMuY2hhaW5bdGhpcy5jaGFpbi5sZW5ndGggLSAxXS5yb3csXG4gICAgICAgICAgICBjb2x1bW46IHRoaXMuY2hhaW5bdGhpcy5jaGFpbi5sZW5ndGggLSAxXS5jb2x1bW5cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdyaWQuc2V0Q2VsbChuZXh0Q29vcmRpbmF0ZSwgQ0VMTF9UWVBFLkVNUFRZKTtcbiAgICAgICAgdGhpcy5jaGFpbi5wb3AoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDRUxMX1NJWkUsIENFTExfVFlQRSwgQ09MT1IgfSBmcm9tIFwiLi4vc2hhcmVkL2NvbnN0YW50c1wiO1xuaW1wb3J0IElDb29yZGluYXRlIGZyb20gXCIuLi9zaGFyZWQvSUNvb3JkaW5hdGVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICAgIHByaXZhdGUgcmVhZG9ubHkgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgcHJpdmF0ZSByZWFkb25seSBzdGFydFNjcmVlbjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSByZWFkb25seSBwYXVzZVNjcmVlbjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSByZWFkb25seSBzY29yZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSByZWFkb25seSBzcGVlZENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGNvbHM6IG51bWJlciwgcHJpdmF0ZSByZWFkb25seSByb3dzOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5zdGFydFNjcmVlbiA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwb3B1cC0tc3RhcnQnKVswXTtcbiAgICAgICAgdGhpcy5wYXVzZVNjcmVlbiA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwb3B1cC0tcGF1c2UnKVswXTtcbiAgICAgICAgdGhpcy5zY29yZUNvbnRhaW5lciA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzY29yZScpWzBdO1xuICAgICAgICB0aGlzLnNwZWVkQ29udGFpbmVyID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NwZWVkJylbMF07XG4gICAgICAgIHRoaXMuY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JhdHRsZWZpZWxkJylbMF07XG4gICAgICAgIHRoaXMuY2FudmFzLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBgJHt0aGlzLmNvbHMgKiBDRUxMX1NJWkV9cHhgKTtcbiAgICAgICAgdGhpcy5jYW52YXMuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBgJHt0aGlzLnJvd3MgKiBDRUxMX1NJWkV9cHhgKTtcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIH1cblxuICAgIGRyYXcoZ3JpZDogQ0VMTF9UWVBFW11bXSk6IHZvaWQge1xuICAgICAgICBncmlkLmZvckVhY2goKHJvd0FycjogW10sIHJvdzogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICByb3dBcnIuZm9yRWFjaCgodHlwZTogQ0VMTF9UWVBFLCBjb2x1bW46IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0NlbGwoeyByb3csIGNvbHVtbiB9LCB0eXBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVTY29yZShzY29yZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2NvcmVDb250YWluZXIudGV4dENvbnRlbnQgPSBzY29yZS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNwZWVkKHNwZWVkOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zcGVlZENvbnRhaW5lci50ZXh0Q29udGVudCA9IHNwZWVkLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgaGlkZVN0YXJ0U2NyZWVuKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0YXJ0U2NyZWVuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgdG9nZ2xlUGF1c2VTY3JlZW4oKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGF1c2VTY3JlZW4uc3R5bGUuZGlzcGxheSA9IHRoaXMucGF1c2VTY3JlZW4uc3R5bGUuZGlzcGxheSA9PT0gJ2ZsZXgnID8gJ25vbmUnIDogJ2ZsZXgnO1xuICAgIH1cblxuICAgIHByaXZhdGUgZHJhd0NlbGwoY29vcmRpbmF0ZTogSUNvb3JkaW5hdGUsIHR5cGU6IENFTExfVFlQRSk6IHZvaWQge1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBDT0xPUlt0eXBlXSB8fCBDT0xPUltDRUxMX1RZUEUuRU1QVFldO1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdChjb29yZGluYXRlLmNvbHVtbiAqIENFTExfU0laRSwgY29vcmRpbmF0ZS5yb3cgKiBDRUxMX1NJWkUsIENFTExfU0laRSwgQ0VMTF9TSVpFKTtcbiAgICB9O1xufVxuIiwiaW1wb3J0IEdhbWUgZnJvbSAnLi9jb250cm9sbGVycy9HYW1lJztcblxuY29uc3QgZ2FtZSA9IG5ldyBHYW1lKCk7XG5jb25zdCBzdGFydEJ1dHRvbiA9IDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwb3B1cF9fYnV0dG9uJylbMF07XG5cbnN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZ2FtZS5zdGFydCgpKTtcbiIsImltcG9ydCBJQ29vcmRpbmF0ZSBmcm9tIFwiLi9JQ29vcmRpbmF0ZVwiO1xuXG5leHBvcnQgY29uc3QgQ0VMTF9TSVpFOiBudW1iZXIgPSAyMDtcbmV4cG9ydCBjb25zdCBHUklEX01BUkdJTjogbnVtYmVyID0gNjtcbmV4cG9ydCBjb25zdCBNSU5fU1BFRUQ6IG51bWJlciA9IDE7XG5leHBvcnQgY29uc3QgTUFYX1NQRUVEOiBudW1iZXIgPSA4O1xuZXhwb3J0IGNvbnN0IFNQRUVEX0lOQ1JFQVNFX0lOVEVSVkFMOiBudW1iZXIgPSA1O1xuZXhwb3J0IGNvbnN0IFNUQVJUX1NOQUtFX0NPT1JESU5BVEU6IElDb29yZGluYXRlID0ge1xuICAgIHJvdzogMyxcbiAgICBjb2x1bW46IDNcbn07XG5cbmV4cG9ydCBlbnVtIEtFWSB7XG4gICAgQVJST1dfVVAgPSAnQXJyb3dVcCcsXG4gICAgQVJST1dfUklHSFQgPSAnQXJyb3dSaWdodCcsXG4gICAgQVJST1dfRE9XTiA9ICdBcnJvd0Rvd24nLFxuICAgIEFSUk9XX0xFRlQgPSAnQXJyb3dMZWZ0JyxcbiAgICBFTlRFUiA9ICdFbnRlcicsXG4gICAgU1BBQ0UgPSAnICdcbn1cblxuZXhwb3J0IGVudW0gQ0VMTF9UWVBFIHtcbiAgICBFTVBUWSxcbiAgICBTTkFLRSxcbiAgICBBUFBMRSxcbiAgICBDUkFTSFxufVxuXG5leHBvcnQgZW51bSBESVJFQ1RJT04ge1xuICAgIFJJR0hULFxuICAgIExFRlQsXG4gICAgRE9XTixcbiAgICBVUFxufVxuXG5leHBvcnQgY29uc3QgQ09MT1IgPSB7XG4gICAgW0NFTExfVFlQRS5TTkFLRV06ICcjMDA1N2U3JyxcbiAgICBbQ0VMTF9UWVBFLkFQUExFXTogJyNkNjJkMjAnLFxuICAgIFtDRUxMX1RZUEUuQ1JBU0hdOiAnI2ZmYTcwMCcsXG4gICAgW0NFTExfVFlQRS5FTVBUWV06ICcjZmZmZmZmJ1xufTtcbiJdfQ==
