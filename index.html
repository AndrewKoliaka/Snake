<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Snake</title><!-- inject:css --><style>:root{--color-start-button:#0057e7;--color-start-background:rgba(137,137,137, 0.5);--color-border:#000000;--font-size-popup-text:34px;--panel-height:22px}body,html{font-family:sans-serif;margin:0}body{display:flex;justify-content:center;align-items:center;height:100vh}.wrapper{position:relative;display:flex;flex-direction:column}.panel{display:flex;justify-content:space-between;height:var(--panel-height)}.panel__section{flex-basis:30%}.panel__section.panel__section--center{text-align:center}.battlefield{border:10px solid var(--color-border)}.popup{position:absolute;top:var(--panel-height);left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;background:var(--color-start-background)}.popup.popup--pause{display:none}.popup__button{padding:10px 30px;border:none;background:var(--color-start-button);font-size:var(--font-size-popup-text);color:#fff;cursor:pointer}.popup__text{font-size:var(--font-size-popup-text)}</style><!-- endinject --></head><body><div class="wrapper"><div class="panel"><span class="panel__section">score: <span class="score">0</span> speed: <span class="speed">1</span> </span><span class="panel__section panel__section--center">controls: ↑ ↓ → ← space</span> <span class="panel__section"></span></div><div class="popup popup--start"><button class="popup__button">START</button></div><div class="popup popup--pause"><span class="popup__text">GAME PAUSED</span></div><canvas class="battlefield"></canvas></div><!-- inject:js --><script>!function s(o,a,c){function u(e,t){if(!a[e]){if(!o[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(h)return h(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[e]={exports:{}};o[e][0].call(r.exports,function(t){return u(o[e][1][t]||t)},r,r.exports,s,o,a,c)}return a[e].exports}for(var h="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../shared/constants"),r=t("./Grid"),s=t("./View"),o=t("./Snake"),a=function(){function t(){this.frame=0,this.score=0,this.speed=n.MIN_SPEED,this.direction=n.DIRECTION.RIGHT,this.isPaused=!1,this.grid=new r.default,this.view=new s.default(this.grid.columnsQuantity,this.grid.rowsQuantity),this.snake=new o.default(this.grid),window.addEventListener("keydown",this.onKeyDown.bind(this)),this.generateApple()}return t.prototype.start=function(){this.view.hideStartScreen(),window.focus(),window.requestAnimationFrame(this.startLoop.bind(this))},t.prototype.pause=function(){this.isPaused=!0,this.view.togglePauseScreen()},t.prototype.resume=function(){this.isPaused=!1,this.view.togglePauseScreen(),window.requestAnimationFrame(this.startLoop.bind(this))},t.prototype.onKeyDown=function(t){switch(t.key){case n.KEY.ARROW_RIGHT:this.tempDirection=n.DIRECTION.RIGHT;break;case n.KEY.ARROW_LEFT:this.tempDirection=n.DIRECTION.LEFT;break;case n.KEY.ARROW_UP:this.tempDirection=n.DIRECTION.UP;break;case n.KEY.ARROW_DOWN:this.tempDirection=n.DIRECTION.DOWN;break;case n.KEY.ENTER:this.frame||this.start();break;case n.KEY.SPACE:this.frame&&(this.isPaused?this.resume():this.pause())}},t.prototype.generateApple=function(){var t=this.getEmptyCoordinates(),e=t[Math.floor(Math.random()*(t.length-1))];this.grid.setCell(e,n.CELL_TYPE.APPLE)},t.prototype.getEmptyCoordinates=function(){for(var t=[],e=0;e<this.grid.rowsQuantity;e++)for(var i=0;i<this.grid.columnsQuantity;i++)this.grid.getCell({row:e,column:i})===n.CELL_TYPE.EMPTY&&t.push({row:e,column:i});return t},t.prototype.startLoop=function(){if(!this.isPaused)if(++this.frame%(n.MAX_SPEED-this.speed||n.MIN_SPEED)==0){var t=this.snake.head.row,e=this.snake.head.column;switch(this.getNextDirection()){case n.DIRECTION.RIGHT:e++;break;case n.DIRECTION.LEFT:e--;break;case n.DIRECTION.UP:t--;break;case n.DIRECTION.DOWN:t++}if(!this.checkGameOver({row:t,column:e}))this.grid.getCell({row:t,column:e})===n.CELL_TYPE.APPLE&&(this.snake.eat({row:t,column:e}),this.generateApple(),this.updateScore(++this.score)),this.snake.move({row:t,column:e}),this.view.draw(this.grid.grid),window.requestAnimationFrame(this.startLoop.bind(this))}else window.requestAnimationFrame(this.startLoop.bind(this))},t.prototype.getNextDirection=function(){switch(this.tempDirection){case n.DIRECTION.RIGHT:this.direction!==n.DIRECTION.LEFT&&(this.direction=n.DIRECTION.RIGHT);break;case n.DIRECTION.LEFT:this.direction!==n.DIRECTION.RIGHT&&(this.direction=n.DIRECTION.LEFT);break;case n.DIRECTION.UP:this.direction!==n.DIRECTION.DOWN&&(this.direction=n.DIRECTION.UP);break;case n.DIRECTION.DOWN:this.direction!==n.DIRECTION.UP&&(this.direction=n.DIRECTION.DOWN)}return this.direction},t.prototype.updateScore=function(t){t%n.SPEED_INCREASE_INTERVAL==0&&this.view.updateSpeed(++this.speed),this.view.updateScore(t)},t.prototype.checkGameOver=function(t){var e=t.row<0||t.column<0||t.row>this.grid.rowsQuantity-1||t.column>this.grid.columnsQuantity-1,i=this.grid.getCell(t)===n.CELL_TYPE.SNAKE;return e||i},t}();i.default=a},{"../shared/constants":6,"./Grid":2,"./Snake":3,"./View":4}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../shared/constants"),r=function(){function t(){this._grid=[],this._cols=Math.round(window.innerWidth/n.CELL_SIZE)-n.GRID_MARGIN,this._rows=Math.round(window.innerHeight/n.CELL_SIZE)-n.GRID_MARGIN;for(var t=0;t<this._rows;t++){this._grid[t]=[];for(var e=0;e<this._cols;e++)this._grid[t][e]=n.CELL_TYPE.EMPTY}}return Object.defineProperty(t.prototype,"columnsQuantity",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowsQuantity",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),t.prototype.getCell=function(t){return this._grid[t.row][t.column]},t.prototype.setCell=function(t,e){this._grid[t.row][t.column]=e},t}();i.default=r},{"../shared/constants":6}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../shared/constants"),r=function(){function t(t){this.grid=t,this.chain=[],this.chain.push(n.START_SNAKE_COORDINATE)}return Object.defineProperty(t.prototype,"head",{get:function(){return this.chain[0]},enumerable:!0,configurable:!0}),t.prototype.eat=function(t){this.chain.unshift(t),this.grid.setCell(t,n.CELL_TYPE.SNAKE)},t.prototype.move=function(t){this.chain.unshift(t),this.grid.setCell(t,n.CELL_TYPE.SNAKE);var e={row:this.chain[this.chain.length-1].row,column:this.chain[this.chain.length-1].column};this.grid.setCell(e,n.CELL_TYPE.EMPTY),this.chain.pop()},t}();i.default=r},{"../shared/constants":6}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../shared/constants"),r=function(){function t(t,e){this.cols=t,this.rows=e,this.startScreen=document.getElementsByClassName("popup--start")[0],this.pauseScreen=document.getElementsByClassName("popup--pause")[0],this.scoreContainer=document.getElementsByClassName("score")[0],this.speedContainer=document.getElementsByClassName("speed")[0],this.canvas=document.getElementsByClassName("battlefield")[0],this.ctx=this.canvas.getContext("2d"),this.canvas.setAttribute("width",this.cols*n.CELL_SIZE+"px"),this.canvas.setAttribute("height",this.rows*n.CELL_SIZE+"px")}return t.prototype.draw=function(t){var n=this;t.forEach(function(t,i){t.forEach(function(t,e){n.drawCell({row:i,column:e},t)})})},t.prototype.updateScore=function(t){this.scoreContainer.textContent=t.toString()},t.prototype.updateSpeed=function(t){this.speedContainer.textContent=t.toString()},t.prototype.hideStartScreen=function(){this.startScreen.style.display="none"},t.prototype.togglePauseScreen=function(){this.pauseScreen.style.display="flex"===this.pauseScreen.style.display?"none":"flex"},t.prototype.drawCell=function(t,e){this.ctx.fillStyle=n.COLOR[e]||n.COLOR[n.CELL_TYPE.EMPTY],this.ctx.fillRect(t.column*n.CELL_SIZE,t.row*n.CELL_SIZE,n.CELL_SIZE,n.CELL_SIZE)},t}();i.default=r},{"../shared/constants":6}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=new(t("./controllers/Game").default);document.getElementsByClassName("popup__button")[0].addEventListener("click",function(){return n.start()})},{"./controllers/Game":1}],6:[function(t,e,i){"use strict";var n,r,s,o,a;Object.defineProperty(i,"__esModule",{value:!0}),i.CELL_SIZE=20,i.GRID_MARGIN=6,i.MIN_SPEED=1,i.MAX_SPEED=8,i.SPEED_INCREASE_INTERVAL=5,i.START_SNAKE_COORDINATE={row:3,column:3},(r=i.KEY||(i.KEY={})).ARROW_UP="ArrowUp",r.ARROW_RIGHT="ArrowRight",r.ARROW_DOWN="ArrowDown",r.ARROW_LEFT="ArrowLeft",r.ENTER="Enter",r.SPACE=" ",(o=s=i.CELL_TYPE||(i.CELL_TYPE={}))[o.EMPTY=0]="EMPTY",o[o.SNAKE=1]="SNAKE",o[o.APPLE=2]="APPLE",o[o.CRASH=3]="CRASH",(a=i.DIRECTION||(i.DIRECTION={}))[a.RIGHT=0]="RIGHT",a[a.LEFT=1]="LEFT",a[a.DOWN=2]="DOWN",a[a.UP=3]="UP",i.COLOR=((n={})[s.SNAKE]="#0057e7",n[s.APPLE]="#d62d20",n[s.CRASH]="#ffa700",n[s.EMPTY]="#ffffff",n)},{}]},{},[5])</script><!-- endinject --></body></html>